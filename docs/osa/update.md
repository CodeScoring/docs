---
hide:
  - footer
---

# Обновление данных о компонентах

CodeScoring OSA автоматически обновляет информацию о компонентах, чтобы обеспечить актуальность данных об угрозах и лицензиях.

## Механизм обновления

Компоненты (пакеты и образы), которые запрашивались хотя бы один раз за последние 14 дней, считаются **актуальными**. Система обновляет по ним данные каждые 2 часа, включая:

- сведения об уязвимостях;
- лицензии;
- описание пакета или образа.

Обновление выполняется в фоновом режиме с распределением нагрузки по очереди.

Если компонент не использовался в течение 14 дней, он автоматически переводится в статус **архивного**. Такие компоненты больше не обновляются до следующего запроса.

## Удаление данных об архивных компонентах

По умолчанию данные об архивных компонентах сохраняются в системе, однако возможно включить их автоматическое удаление. Это поведение регулируется параметрами в конфигурации приложения (файл `app.env`):

- `OSA_ARCHIVE_THRESHOLD_DAYS` — через сколько дней без запросов компонент считается архивным (по умолчанию: `14`);
- `OSA_ARCHIVE_AUTO_CLEANUP_ENABLED` — включение удаления данных об архивных компонентов (по умолчанию: `False`);
- `OSA_ARCHIVE_RETENTION_PERIOD_DAYS` — срок хранения данных об архивных компонентов перед удалением (по умолчанию: `30`);
- `OSA_ARCHIVE_CHUNK_SIZE` — размер порции для пакетной обработки компонентов при обновлении (по умолчанию: `1000`).

## Фильтрация по актуальности

В разделах `OSA → Пакеты`, `OSA → Образы` и Алерты доступен фильтр **Актуальный**, позволяющий управлять отображением компонентов:

- **Да** — отображаются только актуальные (обновляемые) компоненты;
- **Нет** — отображаются только архивные (не обновляемые) компоненты.

По умолчанию отображаются только актуальные компоненты.
