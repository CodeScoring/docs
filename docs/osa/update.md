---
hide:
  - footer
---

# Обновление данных о компонентах

CodeScoring OSA автоматически в фоне обновляет информацию о ранее запрошенных компонентах для обеспечения актуальности данных и должного уровня быстродействия.

## Механизм обновления

Пакеты и образы, которые запрашивались хотя бы один раз за последние 14 дней, считаются актуальными, срок можно поменять в настройках. Система обновляет по таким пакетам данные каждые 2 часа, включая сведения по уязвимостям, лицензиям и мета-информацию по пакетам.

Если компонент не запрашивался в течение 14 дней, он автоматически переводится в статус **архивного**. Такие компоненты больше не обновляются до следующего запроса.

## Архивирование и удаление компонентов

По умолчанию данные об архивных компонентах сохраняются в системе, однако возможно включить их автоматическое удаление. Это поведение регулируется параметрами в конфигурации приложения (файл `app.env`):

- `OSA_ARCHIVE_THRESHOLD_DAYS` — через сколько дней без запросов компонент считается архивным (по умолчанию: `14`);
- `OSA_ARCHIVE_AUTO_CLEANUP_ENABLED` — включение удаления данных об архивных компонентов (по умолчанию: `False`);
- `OSA_ARCHIVE_RETENTION_PERIOD_DAYS` — срок хранения данных об архивных компонентов перед удалением (по умолчанию: `30`);
- `OSA_ARCHIVE_CHUNK_SIZE` — размер порции для пакетной обработки компонентов при архивации и удалении (по умолчанию: `1000`).

## Фильтрация по актуальности

В разделах `OSA → Пакеты`, `OSA → Образы` и Алерты доступен фильтр **Актуальный**, позволяющий управлять отображением компонентов:

- **Да** — отображаются только актуальные (обновляемые) компоненты;
- **Нет** — отображаются только архивные (не обновляемые) компоненты.

По умолчанию отображаются только актуальные компоненты.