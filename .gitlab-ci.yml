stages:
  - lint

lint_trailing_spaces:
  stage: lint
  image: alpine
  script:
    - echo "🔍 Checking for trailing spaces in changed .md files..."
    - FILES=$(git diff --name-only origin/main...HEAD -- '*.md')
    - |
      echo "$FILES" | while read file; do
        if grep -n '[[:blank:]]$' "$file"; then
          FOUND=true
        fi
      done
    - |
      if [ "$FOUND" = true ]; then
        echo "❌ Trailing spaces found in MR files."
        exit 1
      else
        echo "✅ No trailing spaces in changed files."
      fi
  only:
    - merge_requests