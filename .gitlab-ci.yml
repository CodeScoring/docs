stages:
  - lint

lint_trailing_spaces:
  stage: lint
  image: alpine
  script:
  - echo "üîç Checking for trailing spaces in changed .md files..."
    FILES=$(git diff --name-only origin/main...HEAD -- '*.md')
    echo "$FILES" | while read file; do
      grep -n '[[:blank:]]$' "$file" && FOUND=true
    done
    if [ "$FOUND" = true ]; then
      echo "‚ùå Trailing spaces found in MR files."
      exit 1
    else
      echo "‚úÖ No trailing spaces in changed files."
    fi
  only:
    - merge_requests

lint_markdown_links:
  stage: lint
  image: node:18
  script:
    - npx markdown-link-check --version
    - find . -name "*.md" | while read file; do
        echo "Checking $file"
        npx markdown-link-check --quiet --config .mlc_config.json "$file" || exit 1
      done
  only:
    - merge_requests